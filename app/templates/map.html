{% extends "base.html" %}

{% block title %}Places I've Visited{% endblock %}

{% block content %}

<!-- Places I've Visited -->
<section class="hero">
    <div class="hero-text">
        <div class="about">
            <h2>Places I've Visited</h2>
            <div id="map" style="height: 400px;"></div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener("DOMContentLoaded", () => {
    const map = L.map('map').setView([20, 0], 2);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const locations = {{ visited_locations|tojson|safe }};

    locations.forEach(location => {
        const marker = L.marker(location.coords).addTo(map)
            .bindTooltip(
                `<strong>${location.name}</strong><br>${location.description}`,
                {
                    permanent: true,
                    direction: 'top',
                    offset: [0, -20],
                    className: 'custom-tooltip'
                }
            );

        marker.setIcon(
            L.icon({
                iconUrl: 'https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678111-map-marker-512.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        );
    });
});

</script>

{% endblock %}